!function(){"use strict";angular.module("kmd-datetimepicker",[]).constant("TEMPLATES",{Base:"/source/templates/picker_container.html",Date:"/source/templates/datepicker.html",DatePart:{0:"/source/templates/datepicker.year.html",Year:"/source/templates/datepicker.year.html",1:"/source/templates/datepicker.month.html",Month:"/source/templates/datepicker.month.html",2:"/source/templates/datepicker.day.html",Day:"/source/templates/datepicker.day.html"},Time:"/source/templates/timepicker.html"}).constant("FORMATS",{DateFormat:"DD-MM-YYYY",SwitchLabel_Day:"MMMM YYYY",SwitchLabel_Month:"YYYY",DefaultOutput:"DD-MM-YYYYTHH:mm:ss"}).constant("VIEW_LEVELS",{Date:{0:"Year",Year:0,1:"Month",Month:1,2:"Day",Day:2}})}(),function(){"use strict";function e(e,t,a,r,n,s,d){function i(){c(),l(),o(),m(),v(),f(),w()}function c(){}function l(){r(d.Base).then(function(r){var n=t(r)(e);a.find("body").append(n)})}function o(){var e=V.defaults.startOfWeek;V.daysOfWeek=[];do V.daysOfWeek[V.daysOfWeek.length]=moment().day(e).format("dd"),e=++e%7;while(e!==V.defaults.startOfWeek)}function u(){V.currents.minYear=V.currents.viewDate.year()-5,V.currents.maxYear=V.currents.viewDate.year()+6,V.years=[];for(var e=0;3>e;e++){V.years[e]=[];for(var t=0;4>t;t++){var a=V.currents.minYear+4*e+t;V.years[e][t]={label:a,year:a}}}}function m(){if(V.defaults.alternativeMonthLabels);else{V.months=[];for(var e=0;3>e;e++){V.months[e]=[];for(var t=0;4>t;t++){var a=4*e+t;V.months[e][t]={label:moment().month(a).format("MMM"),month:a}}}}}function v(){var e=[];V.daysOnCalendar=[];for(var t=p(),a=k();t.diff(a,"days")<0;)e[e.length]={label:t.date(),date:t.clone(),inSelectedMonth:t.clone().month()-V.currents.viewDate.month()===0,isDisabled:D(t.clone())},t.add(1,"days");for(var r=0;r<e.length/7;r++){for(var n=[],s=0;7>s;s++)n[n.length]=e[7*r+s];V.daysOnCalendar[r]=n}}function p(){var e=V.currents.viewDate.clone(),t=e.subtract(e.date()-1,"days");return t.day()>V.defaults.startOfWeek?t.day(V.defaults.startOfWeek):t.day()<V.defaults.startOfWeek&&t.day(V.defaults.startOfWeek-7),t}function k(){var e=V.currents.viewDate.clone(),t=e.add(1,"months").subtract(e.date(),"days");return t.clone().add(1,"days").day()!==V.defaults.startOfWeek?t.day(V.defaults.startOfWeek+7):t.day(V.defaults.startOfWeek),t}function f(){switch(V.currents.datepickerViewLevel){case s.Date.Day:V.currents.datepickerSwitchLabel=V.currents.viewDate.format(n.SwitchLabel_Day);break;case s.Date.Month:V.currents.datepickerSwitchLabel=V.currents.viewDate.format(n.SwitchLabel_Month);break;case s.Date.Year:V.currents.datepickerSwitchLabel=V.currents.minYear+" - "+V.currents.maxYear}}function y(e){return e.isSame(moment(),"day")}function h(e){return e.isSame(V.currents.viewDate,"day")}function D(e){var t=!1,a=!1,r=-1!==V.defaults.disableWeekdays.indexOf(e.day());return t||a||r}function w(){V.ngModel=V.currents.date.format(V.defaults.outputFormat)}function b(e){switch(e.preventDefault(),V.currents.datepickerViewLevel){case s.Date.Day:V.currents.datepickerViewLevel=s.Date.Month,V.dateSelectionTemplate=d.DatePart[V.currents.datepickerViewLevel],f();break;case s.Date.Month:V.currents.datepickerViewLevel=s.Date.Year,V.dateSelectionTemplate=d.DatePart[V.currents.datepickerViewLevel],u(),f()}}function g(){V.currents.datepickerViewLevel+1<=2&&(V.currents.datepickerViewLevel+=1,V.dateSelectionTemplate=d.DatePart[V.currents.datepickerViewLevel],f())}function M(e,t){e.preventDefault(),V.currents.viewDate.set("year",t),V.currents.date=V.currents.viewDate.clone(),w(),g()}function L(e,t){e.preventDefault(),V.currents.viewDate.set("month",t),V.currents.date=V.currents.viewDate.clone(),w(),g(),v()}function Y(e,t,a){e.preventDefault(),t||(V.currents.viewDate.set("year",a.year()),V.currents.viewDate.set("month",a.month()),V.currents.viewDate.set("date",a.date()),V.currents.date=V.currents.viewDate.clone(),w())}function S(e){switch(e.preventDefault(),V.currents.datepickerViewLevel){case s.Date.Day:V.currents.viewDate.add(1,"months"),v();break;case s.Date.Month:V.currents.viewDate.add(1,"years");break;case s.Date.Year:V.currents.viewDate.add(12,"years"),u()}f()}function O(e){switch(e.preventDefault(),V.currents.datepickerViewLevel){case s.Date.Day:V.currents.viewDate.subtract(1,"months"),v();break;case s.Date.Month:V.currents.viewDate.subtract(1,"years");break;case s.Date.Year:V.currents.viewDate.subtract(12,"years"),u()}f()}function W(e,t){switch(e.preventDefault(),t){case"date":V.template=d.Date,V.dateSelectionTemplate=d.DatePart.Day;break;case"time":V.template=d.Time}}var V=this;V.defaults={startOfWeek:0,disableWeekdays:[0],outputFormat:n.DefaultOutput},V.currents={date:moment(),viewDate:moment(),datepickerViewLevel:s.Date.Day,datepickerSwitchLabel:null},angular.extend(V,{daysOfWeek:null,daysOnCalendar:null,months:null,years:null,template:d.Date,dateSelectionTemplate:d.DatePart.Day,isCurrentDay:y,isSelectedDay:h,isDisabled:D}),angular.extend(V,{selectYear:M,selectMonth:L,selectDay:Y,decreaseDatepickerViewLevel:b,datepickerNext:S,datepickerPrevious:O,switchMode:W}),i()}angular.module("kmd-datetimepicker").controller("datetimepickerController",e),e.$inject=["$scope","$compile","$document","$templateRequest","FORMATS","VIEW_LEVELS","TEMPLATES"]}(),function(){"use strict";function e(){var e={scope:{},bindToController:{options:"=datetimepickerOptions",ngModel:"="},controller:"datetimepickerController",controllerAs:"vm",restrict:"A",require:"ngModel"};return e}angular.module("kmd-datetimepicker").directive("datetimepicker",e),e.$inject=[]}(),function(){"use strict";angular.module("kmd-datetimepicker").run(["$templateCache",function(e){e.put("/source/templates/datepicker.day.html",'<table class="kmd-datepicker-day"><tr><th data-ng-repeat="day in vm.daysOfWeek" data-ng-bind="day"></th></tr><tr data-ng-repeat="week in vm.daysOnCalendar"><td data-ng-repeat="day in week"><div class="kmd-button" data-ng-bind="day.label" data-ng-class="{\'day-not-in-selected-month\': !day.inSelectedMonth, \'day-is-today\': vm.isCurrentDay(day.date), \'day-is-selected\': vm.isSelectedDay(day.date), \'day-is-disabled\': day.isDisabled}" data-ng-mousedown="vm.selectDay($event, day.isDisabled, day.date)"></div></td></tr></table>'),e.put("/source/templates/datepicker.html",'<div class="kmd-datepicker"><div class="kmd-row"><div class="kmd-button kmd-prev" data-ng-mousedown="vm.datepickerPrevious($event)"><i class="fa fa-fw fa-chevron-left"></i></div><div class="kmd-button kmd-switch" data-ng-mousedown="vm.decreaseDatepickerViewLevel($event)" data-ng-bind="vm.currents.datepickerSwitchLabel"></div><div class="kmd-button kmd-next" data-ng-mousedown="vm.datepickerNext($event)"><i class="fa fa-fw fa-chevron-right"></i></div></div><div class="kmd-row" data-ng-include="vm.dateSelectionTemplate"></div><div class="kmd-row"><div class="kmd-button kmd-timeswitch" data-ng-mousedown="vm.switchMode($event, \'time\')"><i class="fa fa-fw fa-clock-o"></i></div></div></div>'),e.put("/source/templates/datepicker.month.html",'<table class="kmd-datepicker-month"><tr data-ng-repeat="trimester in vm.months"><td data-ng-repeat="month in trimester"><div class="kmd-button" data-ng-bind="month.label" data-ng-mousedown="vm.selectMonth($event, month.month)"></div></td></tr></table>'),e.put("/source/templates/datepicker.year.html",'<table class="kmd-datepicker-year"><tr data-ng-repeat="trimester in vm.years"><td data-ng-repeat="year in trimester"><div class="kmd-button" data-ng-bind="year.label" data-ng-mousedown="vm.selectYear($event, year.year)"></div></td></tr></table>'),e.put("/source/templates/picker_container.html",'<div class="kmd-datetimepicker" ng-include="vm.template"></div>'),e.put("/source/templates/timepicker.html",'<div class="kmd-timepicker"></div>')}])}();